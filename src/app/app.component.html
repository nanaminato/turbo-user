<ion-app>
  <ion-split-pane contentId="main-content" when="(min-width: 606px)">
    <ion-menu menuId="chat-menu" [disabled]="menuAble.chatDisable" contentId="main-content" type="overlay">
      <ion-content>
        <div class="p-0 m-0 d-flex flex-column h-100 z-2">
          <div class="bg-theme overflow-y-scroll scrollbar-y-none flex-grow-1">
            <!-- 历史记录标记 -->
            @defer (on immediate) {
              <app-chat-history ></app-chat-history>
            } @placeholder {
              <nz-skeleton></nz-skeleton>
            }
          </div>
          <div class="bg-theme sticky-bottom z-0">
            <ng-template #studios>
              <div class="w-100 d-flex flex-column">
                <button nz-button class="rounded-2 bg-light text-dark mx-2 my-1 d-flex flex-row" routerLink="/chat"><img height="25" width="25" src="assets/icon/aichat_11zon.jpg">{{'universal.aiChat' | translate}}</button>
                <button nz-button class="rounded-2 bg-light text-dark mx-2 my-1 d-flex flex-row" routerLink="/image-studio"><img height="25" width="25" src="assets/icon/aipainting_11zon.jpg">{{'universal.aiPainting' | translate}}</button>
                <button nz-button class="rounded-2 bg-light text-dark mx-2 my-1 d-flex flex-row" routerLink="/video-studio"><img height="25" width="25" src="assets/icon/aivideo_11zon.jpg">{{'universal.aiVideo' | translate}}</button>
                <button nz-button class="rounded-2 bg-light text-dark mx-2 my-1 d-flex flex-row" routerLink="/media-studio"><span nz-icon nzType="node-index" nzTheme="outline"></span>多媒体工作室</button>
              </div>
            </ng-template>
            <ng-container *ngTemplateOutlet="studios"></ng-container>
            <div class="w-100">
              <div class="d-flex flex-row">
                <button class="rounded-5 m-2 bg-theme text-theme" nz-button
                        (click)="openSettingPage()"
                >
                  {{ 'chat-history.settings' | translate}}<span nz-icon nzType="setting" nzTheme="outline"></span>
                </button>
                <button class="rounded-5 m-2 d-flex flex-row align-items-center bg-theme text-theme" nz-button
                        (click)="openPromptPage()"
                >
                  {{ 'chat-history.prompts' | translate}}<span nz-icon nzType="appstore" nzTheme="outline"></span>
                </button>
              </div>
              @defer (on viewport) {
                <app-account-label></app-account-label>
              } @placeholder {
                <nz-skeleton></nz-skeleton>
              }
            </div>
          </div>
        </div>
      </ion-content>
    </ion-menu>
    <ion-menu menuId="image-menu" [disabled]="menuAble.imageDisable" contentId="main-content" type="overlay"
      >
      <div class="bg-theme p-0 m-0 d-flex flex-column h-100 z-2">
        <ion-chip color="primary" class="mt-4 mx-2">
          <ion-avatar>
            <img src="assets/icon/image-studio_11zon.jpg">
          </ion-avatar>
          <ion-label>{{'universal.image-studio' | translate}}</ion-label>
        </ion-chip>

        <div class="d-flex flex-column p-3">
          <button class="m-2 rounded-2" nz-button routerLinkActive="active-image" [routerLink]="['image-studio/novita-lcm-txt2img']">{{'image.novita-text2img-lcm'| translate}}</button>
          <button class="m-2 rounded-2" nz-button routerLinkActive="active-image" [routerLink]="['image-studio/novita-lcm-img2img']">{{'image.novita-img2img-lcm'| translate}}</button>
          <button class="m-2 rounded-2" nz-button routerLinkActive="active-image" [routerLink]="['image-studio/novita-txt2img']">{{'image.novita-text2img'| translate}}</button>
          <button class="m-2 rounded-2" nz-button routerLinkActive="active-image" [routerLink]="['image-studio/novita-img2img']">{{'image.novita-img2img'| translate}}</button>
          <button class="m-2 rounded-2" nz-button routerLinkActive="active-image" [routerLink]="['image-studio/dalle']">DALL E</button>
          <button class="m-2 rounded-2" nz-button routerLinkActive="active-image" [routerLink]="['image-studio/task-lib']">{{'universal.storeHouse'| translate}}</button>
        </div>
      </div>
      <div class="bg-theme sticky-bottom z-0">
        <ng-container *ngTemplateOutlet="studios"></ng-container>
        @defer (on viewport) {
          <app-account-label></app-account-label>
        } @placeholder {
          <nz-skeleton></nz-skeleton>
        }
      </div>
    </ion-menu>
    <ion-menu menuId="video-menu" [disabled]="menuAble.videoDisable" contentId="main-content" type="overlay"
    >
      <div class="bg-theme p-0 m-0 d-flex flex-column h-100 z-2">
        <ion-chip color="primary" class="mt-4 mx-2">
          <ion-avatar>
            <img src="assets/icon/image-studio_11zon.jpg">
          </ion-avatar>
          <ion-label>{{'universal.video-studio' | translate}}</ion-label>
        </ion-chip>
        <div class="d-flex flex-column p-3">
          <button class="m-2 rounded-2" nz-button routerLinkActive="active-image" [routerLink]="['video-studio/novita-text2video']">{{'video.novita-text2video'|translate}}</button>
          <button class="m-2 rounded-2" nz-button routerLinkActive="active-image" [routerLink]="['video-studio/task-lib']">{{'universal.storeHouse'| translate}}</button>
        </div>
      </div>
      <div class="bg-theme sticky-bottom z-0">
        <ng-container *ngTemplateOutlet="studios"></ng-container>
        @defer (on viewport) {
          <app-account-label></app-account-label>
        } @placeholder {
          <nz-skeleton></nz-skeleton>
        }
      </div>
    </ion-menu>

    <ion-menu menuId="media-menu" [disabled]="menuAble.mediaDisable" contentId="main-content" type="overlay"
    >
      <div class="bg-theme p-0 m-0 d-flex flex-column h-100 z-2">
        <ion-chip color="primary" class="mt-4 mx-2">
          <ion-avatar>
            <span nz-icon nzType="node-index" nzTheme="outline"></span>
          </ion-avatar>
          <ion-label>多媒体</ion-label>
        </ion-chip>
        <div class="d-flex flex-column p-3">
          <button class="m-2 rounded-2" nz-button routerLinkActive="active-image" [routerLink]="['media-studio/openai-text-to-speech']">openai 文字转语音</button>
          <button class="m-2 rounded-2" nz-button routerLinkActive="active-image" [routerLink]="['media-studio/openai-speech-to-text']">openai 语音转文字</button>
          <button class="m-2 rounded-2" nz-button routerLinkActive="active-image" [routerLink]="['media-studio/media-extractor']">文件内容提取器</button>
        </div>
      </div>
      <div class="bg-theme sticky-bottom z-0">
        <ng-container *ngTemplateOutlet="studios"></ng-container>
        @defer (on viewport) {
          <app-account-label></app-account-label>
        } @placeholder {
          <nz-skeleton></nz-skeleton>
        }
      </div>
    </ion-menu>

    <ion-router-outlet id="main-content"></ion-router-outlet>
  </ion-split-pane>
</ion-app>
