<div class="bg-theme text-theme w-100 h-100 d-flex flex-row">
  <div class="w-100 d-flex flex-row">
    <div class="h-100 flex-grow-0 flex-shrink-0 d-flex flex-column" style="width: 316px;">
      <div class="px-3">
        <div class="d-flex flex-row">
          <button nz-button class="mx-2">
            @if(menuVisible()){
              <nz-icon nzType="menu-fold" nzTheme="outline" (click)="toggleMenu()"/>
            }@else{
              <nz-icon nzType="menu-unfold" nzTheme="outline" (click)="toggleMenu()" />
            }
          </button>
          <div class="m-2">
            <span>{{ 'universal.nsfw'|translate }}</span>
            <nz-switch [(ngModel)]="nsfw"></nz-switch>
          </div>
        </div>
        <app-image-model [model]="model" (ngModelChange)="modelChange($event)"></app-image-model>
      </div>
      <div class="overflow-y-scroll z-0 flex-grow-1 px-3">
        <div>{{'image.prompt'|translate}}</div>
        <textarea [(ngModel)]="prompt"
        ></textarea>
        <div nz-tooltip nzTooltipTitle="必须提供,至少提供一个,使用,分割">{{'image.negative-prompt'|translate}}</div>
        <textarea  [(ngModel)]="negative_prompt">

        </textarea>
        <div class="d-flex flex-row" >
            <div>{{'image.width'|translate}}(128-1024)</div>
            <input nz-input [(ngModel)]="width">
            <div>{{'image.height'|translate}}(128-1024)</div>
            <input nz-input [(ngModel)]="height">
        </div>
        <app-lora-list [nsfw]="nsfw" [min]="-10" [max]="10" [step]="0.1" [default]="1" [loras]="loras"></app-lora-list>
        <app-embedding-list [nsfw]="nsfw" [embeddings]="embeddings"></app-embedding-list>
        <div>{{'image.sampler'|translate}}</div>
        <nz-select [(ngModel)]="sampler" >
          @for(sampler of samplerChoice; track sampler){
            <nz-option>{{sampler}}</nz-option>
          }
        </nz-select>
        <div>{{'image.guidance-scale'|translate}}</div>
        <div class="d-flex flex-row" >
            <nz-slider [nzMin]="1" [nzMax]="30" [nzStep]="0.1" [(ngModel)]="guidance_scale"></nz-slider>
            <nz-input-number [nzMin]="1" [nzMax]="30" [nzStep]="0.1" [(ngModel)]="guidance_scale"></nz-input-number>
        </div>
        <div>{{'image.steps'|translate}}</div>
        <div class="d-flex flex-row" >
            <nz-slider [nzMin]="1" [nzMax]="100" [nzStep]="1" [(ngModel)]="steps"></nz-slider>
            <nz-input-number [nzMin]="1" [nzMax]="100" [nzStep]="1" [(ngModel)]="steps"></nz-input-number>
        </div>
        <div>{{'image.image-num'|translate}}</div>
        <div class="d-flex flex-row" >
            <nz-slider [nzMin]="1" [nzMax]="8" [nzStep]="1" [(ngModel)]="image_num"></nz-slider>
            <nz-input-number [nzMin]="1" [nzMax]="8" [nzStep]="1" [(ngModel)]="image_num"></nz-input-number>
        </div>
        <div>{{'image.seed'|translate}}</div>
        <div>
          <nz-input-number class="w-100" [(ngModel)]="seeds"></nz-input-number>
        </div>
        <div>
          {{'image.clip-skip'|translate}}
        </div>
        <div class="d-flex flex-row" >
            <nz-slider [nzMin]="1.0" [nzMax]="12.0" [nzStep]="1" [(ngModel)]="clipSkip"></nz-slider>
            <nz-input-number [nzMin]="1.0" [nzMax]="12.0" [nzStep]="1" [(ngModel)]="clipSkip"></nz-input-number>
        </div>
      </div>
      <div class="sticky-bottom">
        <button nz-button (click)="generateImages()">{{'universal.generate'|translate}}</button>
      </div>
    </div>
    <div class="h-100 d-flex flex-grow-1 overflow-y-scroll overflow-x-scroll">
      <app-gallery class="w-100" #gallery [loading]="loading" [images]="images"></app-gallery>
    </div>
  </div>
</div>
