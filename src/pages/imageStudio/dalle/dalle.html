<div class="bg-theme text-theme w-100 h-100 d-flex flex-row">
  <div class="w-100 d-flex flex-row">
    <div class="h-100 flex-grow-0 flex-shrink-0 d-flex flex-column" style="width: 316px;">
      <div class="sticky-top px-3">
        <div class="d-flex flex-row">
          <button nz-button class="m-2" (click)="showImageMenu()">
            <span nz-icon nzType="menu-unfold" nzTheme="outline"></span>
          </button>
        </div>
      </div>
      <div class="overflow-y-scroll z-0 flex-grow-1 px-3">
        <ion-label>模型</ion-label>
        <ion-select interface="popover" fill="outline" [(ngModel)]="model">
          <ion-select-option [value]="'dall-e-3'">dall-e-3</ion-select-option>
        </ion-select>
        <ion-label>提示词</ion-label>
        <textarea
          nz-input
          style=""
          class="fs-6"
          [(ngModel)]="prompt"
          [nzAutosize]="{ minRows: 2, maxRows: 6 }"
        ></textarea>
        <ion-label>生成数量</ion-label>
        <ion-row>
          <ion-col>
            <nz-slider [nzMin]="1" [nzMax]="10" [nzStep]="1" [(ngModel)]="image_num"></nz-slider>
          </ion-col>
          <ion-col class="d-flex flex-row-reverse">
            <nz-input-number [nzMin]="1" [nzMax]="16" [nzStep]="1" [(ngModel)]="image_num"></nz-input-number>
          </ion-col>
        </ion-row>
        <ion-label>生成大小</ion-label>
        <ion-select interface="popover" fill="outline" [(ngModel)]="size">
          @for(size of sizes;track size){
            <ion-select-option [value]="size">{{ size }}</ion-select-option>
          }
        </ion-select>
        <ion-label>质量</ion-label>
        <ion-select interface="popover" fill="outline" [(ngModel)]="quality">
          @for(quality of qualities;track quality){
            <ion-select-option [value]="quality">{{ quality }}</ion-select-option>
          }
        </ion-select>
        <ion-label>风格</ion-label>
        <ion-select interface="popover" fill="outline" [(ngModel)]="style">
          @for(style of styles;track style){
            <ion-select-option [value]="style">{{ style }}</ion-select-option>
          }
        </ion-select>
        <ion-label>数据格式</ion-label>
        <ion-select interface="popover" fill="outline" [(ngModel)]="response_format">
          @for(response_format of image_response_formats;track response_format){
            <ion-select-option [value]="response_format">{{ response_format }}</ion-select-option>
          }
        </ion-select>
      </div>
      <div class="sticky-bottom">
        <ion-button expand="block" (click)="generateImages()">{{ 'universal.generate'|translate }}</ion-button>
      </div>
    </div>
    <div class="h-100 d-flex flex-grow-1 overflow-y-scroll overflow-x-scroll">
      <app-gallery class="w-100" #gallery [loading]="loading" [images]="images"></app-gallery>
    </div>
  </div>
</div>
