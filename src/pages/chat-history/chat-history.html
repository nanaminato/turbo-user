<div
  class="d-flex flex-column bg-theme w-100 text-theme position-relative overflow-visible">
  <div class="bg-theme sticky-top w-100 p-2 z-1">
    <button nz-button
            nzSize="large"
            (click)="newChat()"
            class="bg-theme w-100 p-2 z-1 d-flex button-hover justify-content-between text-theme border-0">
      <span>
        <img src="assets/icon/favicon.ico" width="20" height="20" alt="ico">
        {{ 'chat-history.new-chat' | translate}}
      </span>
      <span nz-icon nzType="edit" nzTheme="outline"></span>
    </button>
  </div>
  <div class="m-2"></div>
  @for(history of historyTitles; track history.dataId){
    <div class="history-title bg-theme text-theme d-flex justify-content-start"
         [class.selected]="selectId===history.dataId"
         [class.show-delete]="deleteButtonsVisible[history.dataId]"
         (click)="selectHistory(history.dataId)"
         (contextmenu)="onRightClick($event, history.dataId)"
         appSwipeDelete
         (swipeLeft)="showDeleteButton(history.dataId)"
         (swipeRight)="hideDeleteButton()"
    >
      <span>
        {{history.title}}
      </span>
      @if(deleteButtonsVisible[history.dataId]){
        <button class="delete-btn"
                (click)="deleteHistory(history.dataId)">删除</button>
      }
    </div>
  }
</div>
@if(contextMenuVisible){
  <div
       class="context-menu"
       [ngStyle]="{'top.px': contextMenuPosition.y, 'left.px': contextMenuPosition.x}"
       (click)="$event.stopPropagation()">
    <div class="context-menu-item" (click)="deleteHistory(contextMenuDataId)">
      <span nz-icon nzTheme="outline" nzType="delete"></span>删除
    </div>
  </div>
}
